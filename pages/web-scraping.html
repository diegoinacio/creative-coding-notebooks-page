<!DOCTYPE html><html><head><!-- ! google analytics --><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JSBTM5PWQ3"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JSBTM5PWQ3');</script><!-- /! google analytics --><!-- ! custom meta tags --><link rel="icon" type="image/svg+xml" href="../favicon.svg"><link rel="alternate icon" href="../favicon.ico"><title>Web Scraping | Tips &amp; Tricks</title><meta name="section_name" content="Tips &amp; Tricks"><meta name="section_id" content="Tips-and-Tricks"><meta name="notebook_name" content="Web Scraping"><meta name="notebook_id" content="web-scraping"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Diego Inácio"><meta property="og:url" content="https://diegoinacio.github.io/creative-coding-notebooks-page/pages/web-scraping.html"><meta name="title" property="og:title" content="Web Scraping >> Creative Coding Notebooks | Diego Inácio"><meta name="description" property="og:description" content="Some demonstrations of how to scrape data on the web."><meta name="image" property="og:image" content="https://diegoinacio.github.io/creative-coding-notebooks-page/images/thumb_web-scraping.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="og:type" content="article"><meta property="article:author" content="Diego Inácio"><meta property="article:section" content="Creative Coding Notebooks"><!-- /! custom meta tags --><!-- ! custom notebook style --><link rel="stylesheet" href="../assets/css/notebook-standard.css"><link rel="stylesheet" href="../assets/css/notebook-custom.css"><!-- /! custom notebook style --><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script><!-- Load mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML-full,Safe"></script><!-- MathJax configuration --><script type="text/x-mathjax-config">init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: { 
                    automatic: true 
                    }
                },
                "HTML-CSS": {
                    linebreaks: { 
                    automatic: true 
                    }
                }
            });
        
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();</script><!-- End of mathjax configuration --></head><body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light"><!-- ! custom navbar --><div class="notebook-navbar"></div><!-- /! custom navbar --><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h1 id="Web-Scraping">Web Scraping<a class="anchor-link" href="#Web-Scraping">¶</a></h1><hr><ul><li>Author: Diego Inácio</li><li>GitHub: <a href="https://github.com/diegoinacio">github.com/diegoinacio</a></li><li>Notebook: <a href="https://github.com/diegoinacio/creative-coding-notebooks/blob/master/Tips-and-Tricks/web-scraping.ipynb">web-scraping.ipynb</a></li></ul><hr><p>Some demonstrations of how to scrape data on the web.</p><p><a href="https://en.wikipedia.org/wiki/Web_scraping">Web scraping</a> or <strong>web data extraction</strong> is a process that allows us to collect structured (or even unstructured) data from the web via requests.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[1]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Scraping libraries</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="c1"># Display libraries</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">Image</span><span class="p">,</span> <span class="n">Audio</span>
</pre></div></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h2 id="Request-and-HTML-Parsing">Request and HTML Parsing<a class="anchor-link" href="#Request-and-HTML-Parsing">¶</a></h2><hr><p>The libraries we need are:</p><ul><li><strong>Requests</strong>: Allows us to send <em>HTTP requests</em> in an extremely easily way.</li><li><strong>Beautiful Soup</strong>: Allows us to extract data from HTML files and parse it to a Python objct.</li></ul><p>For the following example, let's take the content table from the page <a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation">Ordinary Differential Equation</a> on wikipedia.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[2]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Request and parse</span>
<span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://en.wikipedia.org/wiki/Ordinary_differential_equation"</span>
<span class="n">html_text</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="n">parse</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>

<span class="c1"># Get content table</span>
<span class="n">content_table</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">parse</span>
        <span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"id"</span><span class="p">:</span> <span class="s2">"mw-content-text"</span><span class="p">})</span>
        <span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"id"</span><span class="p">:</span> <span class="s2">"toc"</span><span class="p">})</span>
        <span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"ul"</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Change href for each item to redirect to actual page</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">content_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">):</span>
    <span class="n">new_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span>
    <span class="n">a</span><span class="p">[</span><span class="s2">"href"</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_URL</span>

<span class="c1"># Display content</span>
<span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">content_table</span><span class="p">))</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[2]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><ul><li class="toclevel-1 tocsection-1"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Differential_equations"><span class="tocnumber">1</span> <span class="toctext">Differential equations</span></a></li><li class="toclevel-1 tocsection-2"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Background"><span class="tocnumber">2</span> <span class="toctext">Background</span></a></li><li class="toclevel-1 tocsection-3"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Definitions"><span class="tocnumber">3</span> <span class="toctext">Definitions</span></a><ul><li class="toclevel-2 tocsection-4"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#General_definition"><span class="tocnumber">3.1</span> <span class="toctext">General definition</span></a></li><li class="toclevel-2 tocsection-5"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#System_of_ODEs"><span class="tocnumber">3.2</span> <span class="toctext">System of ODEs</span></a></li><li class="toclevel-2 tocsection-6"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Solutions"><span class="tocnumber">3.3</span> <span class="toctext">Solutions</span></a></li></ul></li><li class="toclevel-1 tocsection-7"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Theories"><span class="tocnumber">4</span> <span class="toctext">Theories</span></a><ul><li class="toclevel-2 tocsection-8"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Singular_solutions"><span class="tocnumber">4.1</span> <span class="toctext">Singular solutions</span></a></li><li class="toclevel-2 tocsection-9"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Reduction_to_quadratures"><span class="tocnumber">4.2</span> <span class="toctext">Reduction to quadratures</span></a></li><li class="toclevel-2 tocsection-10"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Fuchsian_theory"><span class="tocnumber">4.3</span> <span class="toctext">Fuchsian theory</span></a></li><li class="toclevel-2 tocsection-11"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Lie's_theory"><span class="tocnumber">4.4</span> <span class="toctext">Lie's theory</span></a></li><li class="toclevel-2 tocsection-12"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Sturm–Liouville_theory"><span class="tocnumber">4.5</span> <span class="toctext">Sturm–Liouville theory</span></a></li></ul></li><li class="toclevel-1 tocsection-13"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Existence_and_uniqueness_of_solutions"><span class="tocnumber">5</span> <span class="toctext">Existence and uniqueness of solutions</span></a><ul><li class="toclevel-2 tocsection-14"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Local_existence_and_uniqueness_theorem_simplified"><span class="tocnumber">5.1</span> <span class="toctext">Local existence and uniqueness theorem simplified</span></a></li><li class="toclevel-2 tocsection-15"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Global_uniqueness_and_maximum_domain_of_solution"><span class="tocnumber">5.2</span> <span class="toctext">Global uniqueness and maximum domain of solution</span></a></li></ul></li><li class="toclevel-1 tocsection-16"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Reduction_of_order"><span class="tocnumber">6</span> <span class="toctext">Reduction of order</span></a><ul><li class="toclevel-2 tocsection-17"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Reduction_to_a_first-order_system"><span class="tocnumber">6.1</span> <span class="toctext">Reduction to a first-order system</span></a></li></ul></li><li class="toclevel-1 tocsection-18"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Summary_of_exact_solutions"><span class="tocnumber">7</span> <span class="toctext">Summary of exact solutions</span></a><ul><li class="toclevel-2 tocsection-19"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Separable_equations"><span class="tocnumber">7.1</span> <span class="toctext">Separable equations</span></a></li><li class="toclevel-2 tocsection-20"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#General_first-order_equations"><span class="tocnumber">7.2</span> <span class="toctext">General first-order equations</span></a></li><li class="toclevel-2 tocsection-21"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#General_second-order_equations"><span class="tocnumber">7.3</span> <span class="toctext">General second-order equations</span></a></li><li class="toclevel-2 tocsection-22"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Linear_to_the_nth_order_equations"><span class="tocnumber">7.4</span> <span class="toctext">Linear to the <i>n</i>th order equations</span></a></li></ul></li><li class="toclevel-1 tocsection-23"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#The_guessing_method"><span class="tocnumber">8</span> <span class="toctext">The guessing method</span></a></li><li class="toclevel-1 tocsection-24"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Software_for_ODE_solving"><span class="tocnumber">9</span> <span class="toctext">Software for ODE solving</span></a></li><li class="toclevel-1 tocsection-25"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#See_also"><span class="tocnumber">10</span> <span class="toctext">See also</span></a></li><li class="toclevel-1 tocsection-26"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Notes"><span class="tocnumber">11</span> <span class="toctext">Notes</span></a></li><li class="toclevel-1 tocsection-27"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#References"><span class="tocnumber">12</span> <span class="toctext">References</span></a></li><li class="toclevel-1 tocsection-28"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#Bibliography"><span class="tocnumber">13</span> <span class="toctext">Bibliography</span></a></li><li class="toclevel-1 tocsection-29"><a href="https://en.wikipedia.org/wiki/Ordinary_differential_equation#External_links"><span class="tocnumber">14</span> <span class="toctext">External links</span></a></li></ul></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h2 id="Structured-Data">Structured Data<a class="anchor-link" href="#Structured-Data">¶</a></h2><hr><p>Scraping structured data with examples.</p></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h3 id="HTML-Tables">HTML Tables<a class="anchor-link" href="#HTML-Tables">¶</a></h3><hr><p>Getting data from HTML tables.</p><p>For the following example, let's take a currency exchange table for Brazillian Real.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[3]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://www.x-rates.com/table/?from=BRL&amp;amount=1"</span>
<span class="n">html_text</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="n">parse</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">parse</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"table"</span><span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[3]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><table cellpadding="0" cellspacing="0" class="ratesTable"><thead><tr><th class="rtHeader rtHeaderCurr">Brazilian Real</th><th class="rtHeader rtHeaderValues">1.00 BRL</th><th class="rtHeader rtHeaderValues">inv. 1.00 BRL</th></tr></thead><tbody><tr><td>US Dollar</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=USD">0.191833</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=USD&amp;to=BRL">5.212876</a></td></tr><tr><td>Euro</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=EUR">0.169593</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=EUR&amp;to=BRL">5.896470</a></td></tr><tr><td>British Pound</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=GBP">0.141776</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=GBP&amp;to=BRL">7.053376</a></td></tr><tr><td>Indian Rupee</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=INR">14.506304</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=INR&amp;to=BRL">0.068936</a></td></tr><tr><td>Australian Dollar</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=AUD">0.268790</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=AUD&amp;to=BRL">3.720378</a></td></tr><tr><td>Canadian Dollar</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=CAD">0.244163</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=CAD&amp;to=BRL">4.095624</a></td></tr><tr><td>Singapore Dollar</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=SGD">0.258403</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=SGD&amp;to=BRL">3.869917</a></td></tr><tr><td>Swiss Franc</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=CHF">0.177584</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=CHF&amp;to=BRL">5.631139</a></td></tr><tr><td>Malaysian Ringgit</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=MYR">0.803826</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=MYR&amp;to=BRL">1.244051</a></td></tr><tr><td>Japanese Yen</td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=BRL&amp;to=JPY">22.185911</a></td><td class="rtRates"><a href="https://www.x-rates.com/graph/?from=JPY&amp;to=BRL">0.045074</a></td></tr></tbody></table></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><p>Having the HTML data, we can bind it to a dataframe using <em>Pandas</em> library.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[4]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">table</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df_table</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[4]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><div><style scoped="">.dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>Brazilian Real</th><th>1.00 BRL</th><th>inv. 1.00 BRL</th></tr></thead><tbody><tr><th>0</th><td>US Dollar</td><td>0.191833</td><td>5.212876</td></tr><tr><th>1</th><td>Euro</td><td>0.169593</td><td>5.896470</td></tr><tr><th>2</th><td>British Pound</td><td>0.141776</td><td>7.053376</td></tr><tr><th>3</th><td>Indian Rupee</td><td>14.506304</td><td>0.068936</td></tr><tr><th>4</th><td>Australian Dollar</td><td>0.268790</td><td>3.720378</td></tr><tr><th>5</th><td>Canadian Dollar</td><td>0.244163</td><td>4.095624</td></tr><tr><th>6</th><td>Singapore Dollar</td><td>0.258403</td><td>3.869917</td></tr><tr><th>7</th><td>Swiss Franc</td><td>0.177584</td><td>5.631139</td></tr><tr><th>8</th><td>Malaysian Ringgit</td><td>0.803826</td><td>1.244051</td></tr><tr><th>9</th><td>Japanese Yen</td><td>22.185911</td><td>0.045074</td></tr></tbody></table></div></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h3 id="Consuming-open-data">Consuming open data<a class="anchor-link" href="#Consuming-open-data">¶</a></h3><hr><p>We can read a csv file on the web simply using its url as an argument.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[5]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://raw.githubusercontent.com/cs109/2014_data/master/countries.csv"</span>
<span class="n">df_csv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
<span class="n">df_csv</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[5]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><div><style scoped="">.dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }</style><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>Country</th><th>Region</th></tr></thead><tbody><tr><th>0</th><td>Algeria</td><td>AFRICA</td></tr><tr><th>1</th><td>Angola</td><td>AFRICA</td></tr><tr><th>2</th><td>Benin</td><td>AFRICA</td></tr><tr><th>3</th><td>Botswana</td><td>AFRICA</td></tr><tr><th>4</th><td>Burkina</td><td>AFRICA</td></tr><tr><th>...</th><td>...</td><td>...</td></tr><tr><th>189</th><td>Paraguay</td><td>SOUTH AMERICA</td></tr><tr><th>190</th><td>Peru</td><td>SOUTH AMERICA</td></tr><tr><th>191</th><td>Suriname</td><td>SOUTH AMERICA</td></tr><tr><th>192</th><td>Uruguay</td><td>SOUTH AMERICA</td></tr><tr><th>193</th><td>Venezuela</td><td>SOUTH AMERICA</td></tr></tbody></table><p>194 rows × 2 columns</p></div></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h2 id="Unstructured-Data">Unstructured Data<a class="anchor-link" href="#Unstructured-Data">¶</a></h2><hr><p>Scraping unstructured data with examples.</p></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h3 id="NoSQL-file">NoSQL file<a class="anchor-link" href="#NoSQL-file">¶</a></h3><hr><p>Reading static <em>json</em> files from the web. For dynamic APIs would be almost the same process.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[6]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://www.plus2net.com/php_tutorial/student.json"</span>
<span class="n">json_file</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">json_file</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[6]:</div><div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain"><pre>[{'id': 1, 'name': 'John Deo', 'class': 'Four', 'mark': 75, 'sex': 'female'},
 {'id': 2, 'name': 'Max Ruin', 'class': 'Three', 'mark': 85, 'sex': 'male'},
 {'id': 3, 'name': 'Arnold', 'class': 'Three', 'mark': 55, 'sex': 'male'},
 {'id': 4, 'name': 'Krish Star', 'class': 'Four', 'mark': 60, 'sex': 'female'},
 {'id': 5, 'name': 'John Mike', 'class': 'Four', 'mark': 60, 'sex': 'female'},
 {'id': 6, 'name': 'Alex John', 'class': 'Four', 'mark': 55, 'sex': 'male'},
 {'id': 7, 'name': 'My John Rob', 'class': 'Fifth', 'mark': 78, 'sex': 'male'},
 {'id': 8, 'name': 'Asruid', 'class': 'Five', 'mark': 85, 'sex': 'male'},
 {'id': 9, 'name': 'Tes Qry', 'class': 'Six', 'mark': 78, 'sex': 'male'},
 {'id': 10, 'name': 'Big John', 'class': 'Four', 'mark': 55, 'sex': 'female'},
 {'id': 11, 'name': 'Ronald', 'class': 'Six', 'mark': 89, 'sex': 'female'},
 {'id': 12, 'name': 'Recky', 'class': 'Six', 'mark': 94, 'sex': 'female'},
 {'id': 13, 'name': 'Kty', 'class': 'Seven', 'mark': 88, 'sex': 'female'},
 {'id': 14, 'name': 'Bigy', 'class': 'Seven', 'mark': 88, 'sex': 'female'},
 {'id': 15, 'name': 'Tade Row', 'class': 'Four', 'mark': 88, 'sex': 'male'},
 {'id': 16, 'name': 'Gimmy', 'class': 'Four', 'mark': 88, 'sex': 'male'},
 {'id': 17, 'name': 'Tumyu', 'class': 'Six', 'mark': 54, 'sex': 'male'},
 {'id': 18, 'name': 'Honny', 'class': 'Five', 'mark': 75, 'sex': 'male'},
 {'id': 19, 'name': 'Tinny', 'class': 'Nine', 'mark': 18, 'sex': 'male'},
 {'id': 20, 'name': 'Jackly', 'class': 'Nine', 'mark': 65, 'sex': 'female'},
 {'id': 21,
  'name': 'Babby John',
  'class': 'Four',
  'mark': 69,
  'sex': 'female'},
 {'id': 22, 'name': 'Reggid', 'class': 'Seven', 'mark': 55, 'sex': 'female'},
 {'id': 23, 'name': 'Herod', 'class': 'Eight', 'mark': 79, 'sex': 'male'},
 {'id': 24, 'name': 'Tiddy Now', 'class': 'Seven', 'mark': 78, 'sex': 'male'},
 {'id': 25, 'name': 'Giff Tow', 'class': 'Six', 'mark': 88, 'sex': 'male'},
 {'id': 26, 'name': 'Crelea', 'class': 'Seven', 'mark': 79, 'sex': 'male'},
 {'id': 27, 'name': 'Big Nose', 'class': 'Three', 'mark': 81, 'sex': 'female'},
 {'id': 28,
  'name': 'Rojj Base',
  'class': 'Seven',
  'mark': 86,
  'sex': 'female'},
 {'id': 29,
  'name': 'Tess Played',
  'class': 'Seven',
  'mark': 55,
  'sex': 'male'},
 {'id': 30, 'name': 'Reppy Red', 'class': 'Six', 'mark': 79, 'sex': 'female'},
 {'id': 31, 'name': 'Marry Toeey', 'class': 'Four', 'mark': 88, 'sex': 'male'},
 {'id': 32,
  'name': 'Binn Rott',
  'class': 'Seven',
  'mark': 90,
  'sex': 'female'},
 {'id': 33, 'name': 'Kenn Rein', 'class': 'Six', 'mark': 96, 'sex': 'female'},
 {'id': 34, 'name': 'Gain Toe', 'class': 'Seven', 'mark': 69, 'sex': 'male'},
 {'id': 35, 'name': 'Rows Noump', 'class': 'Six', 'mark': 88, 'sex': 'female'}]</pre></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h3 id="Image-data">Image data<a class="anchor-link" href="#Image-data">¶</a></h3><hr><p>Scraping <em>img</em> elements on google images search engine.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[7]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Request | image search for "zebra" with large results</span>
<span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://www.google.com/search?q=zebra&amp;tbm=isch"</span>
<span class="n">html_text</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="n">parse</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_text</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>

<span class="c1"># Find all img and show 5 of them</span>
<span class="n">IMG</span> <span class="o">=</span> <span class="n">parse</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"img"</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>

<span class="n">mount</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">IMG</span><span class="p">:</span>
    <span class="n">img</span><span class="p">[</span><span class="s2">"style"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"float: left"</span>
    <span class="n">mount</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="n">mount</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'&lt;div&gt;&lt;h1 style="color: red;"&gt;Image Scraping&lt;/h1&gt;&lt;br&gt;</span><span class="si">{</span><span class="n">mount</span><span class="si">}</span><span class="s1">&lt;/div&gt;'</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">mount</span><span class="p">)</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[7]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><div><h1 style="color: red;">Image Scraping</h1><br><img alt="" class="yWs4tf" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTO12MKm8l0lG4gfsU1vQds0d5xCCqKSN6Hy1nlJXLDCuAGgZPIO65w7ZWJEg&amp;s" style="float: left"><img alt="" class="yWs4tf" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTjUrbcskodbT4utz3KjxOIsApH4hZaFlm4-djNku3ZrLUg1WcHFBVO6FLnbw&amp;s" style="float: left"><img alt="" class="yWs4tf" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2L4BhOf-LhiMxGcxBYjQxxKxmkhYDbi-IlADFjJQJZrrMUJehdoCed2oRhQ&amp;s" style="float: left"><img alt="" class="yWs4tf" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk7JM5lqxxxpLLJ3sEaD7Zf08Q4Q5o1J7LMAFnEIKKZaiC4vgf7sa7GK-nKA&amp;s" style="float: left"><img alt="" class="yWs4tf" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRaZa_vgstlRAa-wzg6s3OIQ9i1uI8lio31qyYysXiL29GjXHn5I_CY1JrGZzw&amp;s" style="float: left"></div></div></div></div></div></div><div class="jp-Cell-inputWrapper"><div class="jp-InputPrompt jp-InputArea-prompt"></div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h3 id="Audio-data">Audio data<a class="anchor-link" href="#Audio-data">¶</a></h3><hr><p>Scraping audio data from web pages.</p><p>For the following example, let's find all audio elements in a page.</p></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[8]:</div><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">mount</span> <span class="o">=</span> <span class="s2">""</span>
<span class="n">TITLE</span><span class="p">,</span> <span class="n">SOURCE</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

<span class="c1"># Request and parsing</span>
<span class="n">URL</span> <span class="o">=</span> <span class="s2">"https://en.wikipedia.org/wiki/Additive_synthesis"</span>
<span class="n">html_text</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="n">parse</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_text</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>

<span class="c1"># Find all audio elements</span>
<span class="n">AUDIO</span> <span class="o">=</span> <span class="n">parse</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"audio"</span><span class="p">)</span>

<span class="c1"># Procedure for each audio element</span>
<span class="k">for</span> <span class="n">audio</span> <span class="ow">in</span> <span class="n">AUDIO</span><span class="p">:</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">audio</span><span class="p">[</span><span class="s2">"data-mwtitle"</span><span class="p">]</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">audio</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"source"</span><span class="p">)</span>
    <span class="n">src</span> <span class="o">=</span> <span class="n">source</span><span class="p">[</span><span class="s2">"src"</span><span class="p">]</span>
    <span class="n">mount</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">'''</span>
<span class="s1">    &lt;div&gt;</span>
<span class="s1">        &lt;h4&gt;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">&lt;/h4&gt;&lt;br&gt;</span>
<span class="s1">        &lt;audio controls&gt;</span>
<span class="s1">          &lt;source src="</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s1">" type="</span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span><span class="si">}</span><span class="s1">"&gt;</span>
<span class="s1">        Your browser does not support the audio element.</span>
<span class="s1">        &lt;/audio&gt;&lt;br&gt;</span>
<span class="s1">        &lt;a href="</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s1">"&gt;</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s1">&lt;/a&gt;</span>
<span class="s1">    &lt;div&gt;</span>
<span class="s1">    '''</span>
    <span class="n">TITLE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">SOURCE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>

<span class="c1"># Output</span>
<span class="n">mount</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'&lt;div&gt;&lt;h1 style="color: red;"&gt;Audio Scraping&lt;/h1&gt;&lt;br&gt;</span><span class="si">{</span><span class="n">mount</span><span class="si">}</span><span class="s1">&lt;/div&gt;'</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">mount</span><span class="p">)</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-OutputPrompt jp-OutputArea-prompt">Out[8]:</div><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html"><div><h1 style="color: red;">Audio Scraping</h1><br><div><h4>Additive_synthesis_bell.ogg</h4><br><audio controls=""><source src="//upload.wikimedia.org/wikipedia/commons/transcoded/f/fe/Additive_synthesis_bell.ogg/Additive_synthesis_bell.ogg.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio><br><a href="//upload.wikimedia.org/wikipedia/commons/transcoded/f/fe/Additive_synthesis_bell.ogg/Additive_synthesis_bell.ogg.mp3">//upload.wikimedia.org/wikipedia/commons/transcoded/f/fe/Additive_synthesis_bell.ogg/Additive_synthesis_bell.ogg.mp3</a><div><div><h4>Harmonic_additive_synthesis.ogg</h4><br><audio controls=""><source src="//upload.wikimedia.org/wikipedia/commons/transcoded/d/db/Harmonic_additive_synthesis.ogg/Harmonic_additive_synthesis.ogg.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio><br><a href="//upload.wikimedia.org/wikipedia/commons/transcoded/d/db/Harmonic_additive_synthesis.ogg/Harmonic_additive_synthesis.ogg.mp3">//upload.wikimedia.org/wikipedia/commons/transcoded/d/db/Harmonic_additive_synthesis.ogg/Harmonic_additive_synthesis.ogg.mp3</a><div><div><h4>Inharmonic_additive_synthesis.ogg</h4><br><audio controls=""><source src="//upload.wikimedia.org/wikipedia/commons/transcoded/2/2d/Inharmonic_additive_synthesis.ogg/Inharmonic_additive_synthesis.ogg.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio><br><a href="//upload.wikimedia.org/wikipedia/commons/transcoded/2/2d/Inharmonic_additive_synthesis.ogg/Inharmonic_additive_synthesis.ogg.mp3">//upload.wikimedia.org/wikipedia/commons/transcoded/2/2d/Inharmonic_additive_synthesis.ogg/Inharmonic_additive_synthesis.ogg.mp3</a><div></div></div></div></div></div></div></div></div></div></div></div></div><!-- ! custom footer --><footer class="notebook-footer"></footer><!-- /! custom footer --><!-- ! custom scripts --><script src="../assets/template/notebook.js"></script><!-- /! custom scripts --></body></html>